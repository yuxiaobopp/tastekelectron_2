(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21ad0c"],{bcb7:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Row",[o("Col",[o("h1",[t._v("Mqtt Topic配置")])]),o("Col",{attrs:{offset:"20"}},[o("Button",{attrs:{type:"primary",size:"large"},on:{click:t.addTopic}},[t._v("定义Topic")])],1)],1),o("Divider"),o("Table",{ref:"table",attrs:{columns:t.columns1,data:t.topicList,stripe:"",size:"large"}}),o("Modal",{attrs:{title:"Common Modal dialog box title",draggable:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[o("p",{attrs:{slot:"header"},slot:"header"},[t._v("定义Topic")]),o("Card",{attrs:{"dis-hover":"",bordered:!1}},[o("Form",{ref:"newTopic",attrs:{model:t.formValidate,rules:t.ruleValidate}},[o("FormItem",{attrs:{label:"Topic类",prop:"topic"}},[o("Input",{attrs:{placeholder:"请填写Topic"},model:{value:t.formValidate.topic,callback:function(e){t.$set(t.formValidate,"topic",e)},expression:"formValidate.topic"}})],1),o("FormItem",{attrs:{label:"操作功能",prop:"function_des"}},[o("Input",{attrs:{placeholder:"例如：connect"},model:{value:t.formValidate.function_des,callback:function(e){t.$set(t.formValidate,"function_des",e)},expression:"formValidate.function_des"}})],1),o("FormItem",{attrs:{label:"描述",prop:"description"}},[o("Input",{attrs:{type:"textarea",rows:4,placeholder:"请填写描述信息"},model:{value:t.formValidate.description,callback:function(e){t.$set(t.formValidate,"description",e)},expression:"formValidate.description"}})],1),o("FormItem",{attrs:{label:"标签",prop:"tag"}},[o("Input",{model:{value:t.formValidate.tag,callback:function(e){t.$set(t.formValidate,"tag",e)},expression:"formValidate.tag"}})],1)],1)],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[t.edit?o("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("newTopic")}}},[t._v("确认修改")]):t._e(),t.edit?o("Button",{attrs:{type:"primary"},on:{click:function(e){t.show=!1}}},[t._v("取消")]):t._e(),t.edit?t._e():o("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("newTopic")}}},[t._v("确定")]),t.edit?t._e():o("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("newTopic")}}},[t._v("重置")])],1)],1),o("Modal",{attrs:{width:"360"},model:{value:t.del_confirm,callback:function(e){t.del_confirm=e},expression:"del_confirm"}},[o("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[o("Icon",{attrs:{type:"ios-information-circle"}}),o("span",[t._v("Delete confirmation")])],1),o("div",{staticStyle:{"text-align":"center"}},[o("p",[t._v("确定删除？")]),o("p",[t._v("Will you delete it?")])]),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"error",size:"large",long:""},on:{click:t.del}},[t._v("Delete")])],1)])],1)},a=[],l=(o("7f7f"),o("66df")),c={name:"mqtt_topic",data:function(){var t=this;return{show:!1,del_confirm:!1,temp_topic:"",topicList:[],edit:!1,formValidate:{topic:"",function_des:"",description:"",tag:""},ruleValidate:{topic:[{required:!0,message:"The topic cannot be empty",trigger:"blur"}],function_des:[{required:!0,message:"Description cannot be empty",trigger:"blur"}]},columns1:[{title:"Topic",key:"topic",width:260,sortable:!0},{title:"功能",key:"function_des",width:150,sortable:!0},{title:"描述",key:"description"},{title:"标签",key:"tag",width:120},{title:"操作",key:"aa",align:"center",render:function(e,o){return e("div",[e("a",{props:{},style:{marginLeft:"0px"},on:{click:function(){t.edit=!0,t.temp_topic=o.row.topic,t.formValidate=o.row,t.show=!0}}},"编辑 / "),e("a",{style:{marginLeft:"0px"},on:{click:function(){t.del_confirm=!0,t.temp_topic=o.row.topic}}},"删除")])}}]}},methods:{addTopic:function(){this.edit=!1,this.show=!0},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(t){if(e.edit){var o=e.formValidate;o.before_edit=e.temp_topic,l["a"].request({url:"api/gateway/editTopic",method:"post",data:o}).then(function(t){console.log(t.data),"ok"==t.data.msg?(e.get_all_topic(),e.$Notice.success({title:"Note:",desc:"修改成功"})):e.$Notice.error({title:"Note:",desc:"修改失败！"})}).catch(function(t){console.log(t)})}else l["a"].request({url:"api/gateway/createTopic",method:"post",data:e.formValidate}).then(function(t){console.log(t.data),"ok"==t.data.msg?(e.get_all_topic(),e.$Notice.success({title:"Note:",desc:"创建成功！"})):e.$Notice.error({title:"Note:",desc:"创建失败！"})}).catch(function(t){console.log(t)});e.show=!1}else e.$Message.error("请填写正确参数!")})},handleReset:function(t){this.$refs[t].resetFields()},get_all_topic:function(){var t=this;l["a"].request({url:"api/gateway/getAllTopic"}).then(function(e){console.log(e.data),"ok"==e.data.msg&&(t.topicList=e.data.data)}).catch(function(t){console.log("get all topic fail"),console.log(t)})},del:function(){var t=this;l["a"].request({url:"api/gateway/delTopic",method:"post",data:{topic:this.temp_topic}}).then(function(e){console.log(e.data),"ok"==e.data.msg?(t.$Message.success("删除成功"),t.get_all_topic()):t.$Message.success("删除失败"),t.del_confirm=!1}).catch(function(t){console.log(t)})}},mounted:function(){this.get_all_topic()}},r=c,n=o("2877"),s=Object(n["a"])(r,i,a,!1,null,null,null);e["default"]=s.exports}}]);